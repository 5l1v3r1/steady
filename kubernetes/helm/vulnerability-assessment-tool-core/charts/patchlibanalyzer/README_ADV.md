
[![version](https://img.shields.io/badge/version-0.1.0-brightgreen.svg)](https://shields.io/)  [![helmutilsversion](https://img.shields.io/badge/helmutilsversion-0.1.2-orange.svg)](https://shields.io/)  [![githublicense](https://img.shields.io/badge/license-Apache_2.0-blue.svg)](https://shields.io/)

# patchlibanalyzer

## .Introduction
A Chart for patch-lib-analyzer

## .Prerequisites
- Kubernetes 1.9 with Beta APIs enabled
- Persistent volume provisionner support in underlying infrastructure

## .Installing the chart
To install the chart with the release name `release`:
```console
$ helm install release patchlibanalyzer --tls
```

The command deploys the patchlibanalyzer subchart of the vulnerability assessment tool 0.1.0
on the Kubernetes cluster in the default configuration. The configuration section lists
the parameters that can be configured during installation.

## .Uninstalling the chart
To uninstall/delete the `release` deployment:
```console
$ helm delete release
```

## .Configuration
The following table lists the configurable parameters of the patchlibanalyzer chart and their default values.


| Parameter  |	Description  |	Default |
|:----------:|:-------------:|:--------:|
| <a href='#0'>replicas</a> | desired number of instances | `3` |
| <a href='#1'>startUpDelay</a> | Delay before the initContainer starts probing using pg_isready | `5` |
| <a href='#2'>backoffDuration</a> | Delay between probing attempts | `5` |
| <a href='#3'>debug</a> |  | `False` |
| <a href='#4'>deployment.enabled</a> |  | `False` |
| <a href='#5'>podNetworkPolicy.enabled</a> |  | `True` |
| <a href='#6'>selfAntiAffinity.soft</a> | flag for affinity type | `True` |
| <a href='#7'>selfAntiAffinity.weight</a> | weight for affinity | `100` |
| <a href='#8'>image.initContainer.pullPolicy</a> | {'Always','IfNotPresent','Never'} | `IfNotPresent` |
| <a href='#9'>image.initContainer.name</a> |  | `postgres` |
| <a href='#10'>image.initContainer.tag</a> | image tag | `11.3-alpine` |
| <a href='#11'>image.initContainer.securityContext.runAsUser</a> | UID | `65534` |
| <a href='#12'>image.initContainer.securityContext.runAsGroup</a> | GID | `65534` |
| <a href='#13'>image.initContainer.securityContext.privileged</a> | allow privileged container | `False` |
| <a href='#14'>image.initContainer.securityContext.readOnlyRootFilesystem</a> | requires the use of a read only root file system | `True` |
| <a href='#15'>image.initContainer.securityContext.capabilities.drop</a> | dropped linux cap | `['ALL']` |
| <a href='#16'>image.initContainer.securityContext.capabilities.add</a> | added linux cap | `['SYS_TIME', 'NET_ADMIN']` |
| <a href='#17'>image.initContainer.resources.limits.memory</a> | memory limit for container | `35Mi` |
| <a href='#18'>image.initContainer.resources.limits.cpu</a> | cpu limit for container | `100m` |
| <a href='#19'>image.initContainer.resources.requests.memory</a> | memory requests for container | `25Mi` |
| <a href='#20'>image.initContainer.resources.requests.cpu</a> | cpu requests for container | `100m` |
| <a href='#21'>image.mainContainer.pullPolicy</a> | {'Always','IfNotPresent','Never'} | `IfNotPresent` |
| <a href='#22'>image.mainContainer.name</a> |  | `vulas/vulnerability-assessment-tool-patch-lib-analyzer` |
| <a href='#23'>image.mainContainer.tag</a> | image tag | `3.1.7-SNAPSHOT` |
| <a href='#24'>image.mainContainer.securityContext.runAsUser</a> | UID | `12300` |
| <a href='#25'>image.mainContainer.securityContext.runAsGroup</a> | GID | `12300` |
| <a href='#26'>image.mainContainer.securityContext.privileged</a> | allow privileged container | `False` |
| <a href='#27'>image.mainContainer.securityContext.readOnlyRootFilesystem</a> | requires the use of a read only root file system | `False` |
| <a href='#28'>image.mainContainer.securityContext.capabilities.drop</a> | dropped linux cap | `['ALL']` |
| <a href='#29'>image.mainContainer.securityContext.capabilities.add</a> | added linux cap | `['DAC_OVERRIDE', 'SYS_TIME', 'NET_ADMIN']` |
| <a href='#30'>image.mainContainer.resources.limits.memory</a> | memory limit for container | `4Gi` |
| <a href='#31'>image.mainContainer.resources.limits.cpu</a> | cpu limit for container | `1000m` |
| <a href='#32'>image.mainContainer.resources.requests.memory</a> | memory requests for container | `1Gi` |
| <a href='#33'>image.mainContainer.resources.requests.cpu</a> | cpu requests for container | `500m` |
| <a href='#34'>persistentVolume.storage</a> | storage size for PVC | `1Gi` |
| <a href='#35'>persistentVolume.mountPath</a> | PVC mountpath | `/patcheval-data` |
| <a href='#36'>persistentVolume.nfs.server</a> | nfs server IP | `10.180.0.12` |
| <a href='#37'>persistentVolume.nfs.path</a> | nfs server shared path | `/share_6fbf0537_3223_456a_8ca6_112d7dbcedc8` |
| <a href='#38'>livenessProbe.enabled</a> | boolean to indicate whether or not livenessProbe is activated | `True` |
| <a href='#39'>livenessProbe.initialDelaySeconds</a> | delay before attempt in seconds | `30` |
| <a href='#40'>livenessProbe.periodSeconds</a> | period between attempts | `20` |
| <a href='#41'>livenessProbe.timeoutSeconds</a> | max response timeout | `5` |
| <a href='#42'>livenessProbe.failureThreshold</a> | attempt amounts before failure | `5` |

---
## .Details about configuration
<details closed><summary><a id='0'>replicas</a></summary>

        - description: desired number of instances
        - default: 3
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='1'>startUpDelay</a></summary>

        - description: Delay before the initContainer starts probing using pg_isready
        - default: 5
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='2'>backoffDuration</a></summary>

        - description: Delay between probing attempts
        - default: 5
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='3'>debug</a></summary>

        - description: 
        - default: False
```
Sets logging level for shell scripts as well as jar

```

<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='4'>deployment.enabled</a></summary>

        - description: 
        - default: False
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='5'>podNetworkPolicy.enabled</a></summary>

        - description: 
        - default: True
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='6'>selfAntiAffinity.soft</a></summary>

        - description: flag for affinity type
        - default: True
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='7'>selfAntiAffinity.weight</a></summary>

        - description: weight for affinity
        - default: 100
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='8'>image.initContainer.pullPolicy</a></summary>

        - description: {'Always','IfNotPresent','Never'}
        - default: IfNotPresent
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='9'>image.initContainer.name</a></summary>

        - description: 
        - default: postgres
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='10'>image.initContainer.tag</a></summary>

        - description: image tag
        - default: 11.3-alpine
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='11'>image.initContainer.securityContext.runAsUser</a></summary>

        - description: UID
        - default: 65534
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='12'>image.initContainer.securityContext.runAsGroup</a></summary>

        - description: GID
        - default: 65534
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='13'>image.initContainer.securityContext.privileged</a></summary>

        - description: allow privileged container
        - default: False
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='14'>image.initContainer.securityContext.readOnlyRootFilesystem</a></summary>

        - description: requires the use of a read only root file system
        - default: True
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='15'>image.initContainer.securityContext.capabilities.drop</a></summary>

        - description: dropped linux cap
        - default: ['ALL']
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='16'>image.initContainer.securityContext.capabilities.add</a></summary>

        - description: added linux cap
        - default: ['SYS_TIME', 'NET_ADMIN']
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='17'>image.initContainer.resources.limits.memory</a></summary>

        - description: memory limit for container
        - default: 35Mi
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='18'>image.initContainer.resources.limits.cpu</a></summary>

        - description: cpu limit for container
        - default: 100m
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='19'>image.initContainer.resources.requests.memory</a></summary>

        - description: memory requests for container
        - default: 25Mi
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='20'>image.initContainer.resources.requests.cpu</a></summary>

        - description: cpu requests for container
        - default: 100m
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='21'>image.mainContainer.pullPolicy</a></summary>

        - description: {'Always','IfNotPresent','Never'}
        - default: IfNotPresent
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='22'>image.mainContainer.name</a></summary>

        - description: 
        - default: vulas/vulnerability-assessment-tool-patch-lib-analyzer
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='23'>image.mainContainer.tag</a></summary>

        - description: image tag
        - default: 3.1.7-SNAPSHOT
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='24'>image.mainContainer.securityContext.runAsUser</a></summary>

        - description: UID
        - default: 12300
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='25'>image.mainContainer.securityContext.runAsGroup</a></summary>

        - description: GID
        - default: 12300
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='26'>image.mainContainer.securityContext.privileged</a></summary>

        - description: allow privileged container
        - default: False
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='27'>image.mainContainer.securityContext.readOnlyRootFilesystem</a></summary>

        - description: requires the use of a read only root file system
        - default: False
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='28'>image.mainContainer.securityContext.capabilities.drop</a></summary>

        - description: dropped linux cap
        - default: ['ALL']
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='29'>image.mainContainer.securityContext.capabilities.add</a></summary>

        - description: added linux cap
        - default: ['DAC_OVERRIDE', 'SYS_TIME', 'NET_ADMIN']
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='30'>image.mainContainer.resources.limits.memory</a></summary>

        - description: memory limit for container
        - default: 4Gi
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='31'>image.mainContainer.resources.limits.cpu</a></summary>

        - description: cpu limit for container
        - default: 1000m
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='32'>image.mainContainer.resources.requests.memory</a></summary>

        - description: memory requests for container
        - default: 1Gi
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='33'>image.mainContainer.resources.requests.cpu</a></summary>

        - description: cpu requests for container
        - default: 500m
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='34'>persistentVolume.storage</a></summary>

        - description: storage size for PVC
        - default: 1Gi
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='35'>persistentVolume.mountPath</a></summary>

        - description: PVC mountpath
        - default: /patcheval-data
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='36'>persistentVolume.nfs.server</a></summary>

        - description: nfs server IP
        - default: 10.180.0.12
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='37'>persistentVolume.nfs.path</a></summary>

        - description: nfs server shared path
        - default: /share_6fbf0537_3223_456a_8ca6_112d7dbcedc8
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='38'>livenessProbe.enabled</a></summary>

        - description: boolean to indicate whether or not livenessProbe is activated
        - default: True
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='39'>livenessProbe.initialDelaySeconds</a></summary>

        - description: delay before attempt in seconds
        - default: 30
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='40'>livenessProbe.periodSeconds</a></summary>

        - description: period between attempts
        - default: 20
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='41'>livenessProbe.timeoutSeconds</a></summary>

        - description: max response timeout
        - default: 5
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        
<details closed><summary><a id='42'>livenessProbe.failureThreshold</a></summary>

        - description: attempt amounts before failure
        - default: 5
<a href="#configuration" style="color:grey">Back to configurations</a>
</details>
        